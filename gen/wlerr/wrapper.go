package wlerr

import (
	"fmt"
)

type WrapperFn func(err error, format string, args ...interface{}) error

// MakeWrapper returns a function that wraps and annotates a parent error.
// prefix is the text that is prepended to all errors generated by the
// function.
func MakeWrapper(format string, args ...interface{}) WrapperFn {
	prefix := fmt.Sprintf(format, args...)
	return func(err error, format string, args ...interface{}) error {
		if format == "" {
			return Wrapf(err, "%s", prefix)
		} else {
			suffix := fmt.Sprintf(format, args...)
			return Wrapf(err, "%s: %s", prefix, suffix)
		}
	}
}
